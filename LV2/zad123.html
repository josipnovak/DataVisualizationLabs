<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <title>Document</title>
</head>
<body>
    <script>
        const jsonData = 
        [{"Ime naselja":"Grad Đakovo","Spol":"UKUPNO","Ukupno":27745,"0-4":1384,"5-9":1509,"10-14":1846,"15-19":2042,"20-24":2025,"25-29":1934,"30-34":1702,"35-39":1690,"40-44":1902,"45-49":2214,"50-54":2159,"55-59":1748,"60-64":1334,"65-69":1107,"70-74":1248,"75-79":1003,"80-84":598,"85-89":243,"90-94":44,"95+":13},
{"Ime naselja":"Grad Đakovo","Spol":"m","Ukupno":13598,"0-4":678,"5-9":763,"10-14":979,"15-19":1037,"20-24":1062,"25-29":1037,"30-34":866,"35-39":881,"40-44":953,"45-49":1086,"50-54":1115,"55-59":911,"60-64":616,"65-69":476,"70-74":501,"75-79":389,"80-84":192,"85-89":44,"90-94":10,"95+":2},
{"Ime naselja":"Grad Đakovo","Spol":"ž","Ukupno":14147,"0-4":706,"5-9":746,"10-14":867,"15-19":1005,"20-24":963,"25-29":897,"30-34":836,"35-39":809,"40-44":949,"45-49":1128,"50-54":1044,"55-59":837,"60-64":718,"65-69":631,"70-74":747,"75-79":614,"80-84":406,"85-89":199,"90-94":34,"95+":11},
{"Ime naselja":"Grad Đakovo Budrovci","Spol":"UKUPNO","Ukupno":1260,"0-4":67,"5-9":76,"10-14":78,"15-19":104,"20-24":103,"25-29":85,"30-34":54,"35-39":63,"40-44":88,"45-49":117,"50-54":100,"55-59":60,"60-64":46,"65-69":68,"70-74":71,"75-79":41,"80-84":26,"85-89":13,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Budrovci","Spol":"m","Ukupno":646,"0-4":33,"5-9":39,"10-14":40,"15-19":64,"20-24":51,"25-29":55,"30-34":26,"35-39":35,"40-44":47,"45-49":59,"50-54":64,"55-59":37,"60-64":18,"65-69":28,"70-74":25,"75-79":16,"80-84":7,"85-89":2,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Budrovci","Spol":"ž","Ukupno":614,"0-4":34,"5-9":37,"10-14":38,"15-19":40,"20-24":52,"25-29":30,"30-34":28,"35-39":28,"40-44":41,"45-49":58,"50-54":36,"55-59":23,"60-64":28,"65-69":40,"70-74":46,"75-79":25,"80-84":19,"85-89":11,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Đakovo","Spol":"UKUPNO","Ukupno":19491,"0-4":918,"5-9":1020,"10-14":1213,"15-19":1370,"20-24":1367,"25-29":1402,"30-34":1285,"35-39":1228,"40-44":1325,"45-49":1519,"50-54":1554,"55-59":1337,"60-64":955,"65-69":789,"70-74":874,"75-79":702,"80-84":418,"85-89":169,"90-94":35,"95+":11},
{"Ime naselja":"Grad Đakovo Đakovo","Spol":"m","Ukupno":9405,"0-4":448,"5-9":499,"10-14":642,"15-19":694,"20-24":718,"25-29":729,"30-34":657,"35-39":630,"40-44":646,"45-49":725,"50-54":765,"55-59":680,"60-64":438,"65-69":334,"70-74":353,"75-79":275,"80-84":136,"85-89":26,"90-94":8,"95+":2},
{"Ime naselja":"Grad Đakovo Đakovo","Spol":"ž","Ukupno":10086,"0-4":470,"5-9":521,"10-14":571,"15-19":676,"20-24":649,"25-29":673,"30-34":628,"35-39":598,"40-44":679,"45-49":794,"50-54":789,"55-59":657,"60-64":517,"65-69":455,"70-74":521,"75-79":427,"80-84":282,"85-89":143,"90-94":27,"95+":9},
{"Ime naselja":"Grad Đakovo Đurđanci","Spol":"UKUPNO","Ukupno":425,"0-4":24,"5-9":18,"10-14":23,"15-19":29,"20-24":39,"25-29":31,"30-34":18,"35-39":17,"40-44":23,"45-49":46,"50-54":30,"55-59":31,"60-64":25,"65-69":11,"70-74":20,"75-79":23,"80-84":9,"85-89":6,"90-94":2,"95+":0},
{"Ime naselja":"Grad Đakovo Đurđanci","Spol":"m","Ukupno":215,"0-4":10,"5-9":10,"10-14":14,"15-19":13,"20-24":25,"25-29":17,"30-34":10,"35-39":11,"40-44":10,"45-49":20,"50-54":20,"55-59":15,"60-64":14,"65-69":7,"70-74":9,"75-79":9,"80-84":1,"85-89":0,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Đurđanci","Spol":"ž","Ukupno":210,"0-4":14,"5-9":8,"10-14":9,"15-19":16,"20-24":14,"25-29":14,"30-34":8,"35-39":6,"40-44":13,"45-49":26,"50-54":10,"55-59":16,"60-64":11,"65-69":4,"70-74":11,"75-79":14,"80-84":8,"85-89":6,"90-94":2,"95+":0},
{"Ime naselja":"Grad Đakovo Ivanovci Gorjanski","Spol":"UKUPNO","Ukupno":580,"0-4":28,"5-9":22,"10-14":43,"15-19":34,"20-24":47,"25-29":40,"30-34":32,"35-39":25,"40-44":42,"45-49":37,"50-54":43,"55-59":34,"60-64":25,"65-69":33,"70-74":35,"75-79":31,"80-84":16,"85-89":11,"90-94":1,"95+":1},
{"Ime naselja":"Grad Đakovo Ivanovci Gorjanski","Spol":"m","Ukupno":286,"0-4":14,"5-9":9,"10-14":28,"15-19":18,"20-24":22,"25-29":24,"30-34":18,"35-39":13,"40-44":19,"45-49":24,"50-54":23,"55-59":18,"60-64":11,"65-69":14,"70-74":13,"75-79":11,"80-84":4,"85-89":3,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Ivanovci Gorjanski","Spol":"ž","Ukupno":294,"0-4":14,"5-9":13,"10-14":15,"15-19":16,"20-24":25,"25-29":16,"30-34":14,"35-39":12,"40-44":23,"45-49":13,"50-54":20,"55-59":16,"60-64":14,"65-69":19,"70-74":22,"75-79":20,"80-84":12,"85-89":8,"90-94":1,"95+":1},
{"Ime naselja":"Grad Đakovo Kuševac","Spol":"UKUPNO","Ukupno":1028,"0-4":46,"5-9":38,"10-14":91,"15-19":92,"20-24":79,"25-29":53,"30-34":52,"35-39":45,"40-44":74,"45-49":88,"50-54":102,"55-59":53,"60-64":46,"65-69":44,"70-74":51,"75-79":44,"80-84":20,"85-89":8,"90-94":2,"95+":0},
{"Ime naselja":"Grad Đakovo Kuševac","Spol":"m","Ukupno":533,"0-4":27,"5-9":24,"10-14":48,"15-19":44,"20-24":42,"25-29":29,"30-34":25,"35-39":24,"40-44":44,"45-49":43,"50-54":59,"55-59":26,"60-64":22,"65-69":25,"70-74":18,"75-79":20,"80-84":10,"85-89":3,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Kuševac","Spol":"ž","Ukupno":495,"0-4":19,"5-9":14,"10-14":43,"15-19":48,"20-24":37,"25-29":24,"30-34":27,"35-39":21,"40-44":30,"45-49":45,"50-54":43,"55-59":27,"60-64":24,"65-69":19,"70-74":33,"75-79":24,"80-84":10,"85-89":5,"90-94":2,"95+":0},
{"Ime naselja":"Grad Đakovo Novi Perkovci","Spol":"UKUPNO","Ukupno":246,"0-4":8,"5-9":11,"10-14":16,"15-19":23,"20-24":21,"25-29":12,"30-34":16,"35-39":15,"40-44":19,"45-49":22,"50-54":19,"55-59":8,"60-64":9,"65-69":6,"70-74":18,"75-79":13,"80-84":8,"85-89":2,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Novi Perkovci","Spol":"m","Ukupno":134,"0-4":5,"5-9":7,"10-14":9,"15-19":11,"20-24":10,"25-29":5,"30-34":10,"35-39":11,"40-44":14,"45-49":14,"50-54":11,"55-59":5,"60-64":6,"65-69":1,"70-74":7,"75-79":5,"80-84":3,"85-89":0,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Novi Perkovci","Spol":"ž","Ukupno":112,"0-4":3,"5-9":4,"10-14":7,"15-19":12,"20-24":11,"25-29":7,"30-34":6,"35-39":4,"40-44":5,"45-49":8,"50-54":8,"55-59":3,"60-64":3,"65-69":5,"70-74":11,"75-79":8,"80-84":5,"85-89":2,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Piškorevci","Spol":"UKUPNO","Ukupno":1907,"0-4":112,"5-9":124,"10-14":143,"15-19":165,"20-24":158,"25-29":128,"30-34":91,"35-39":113,"40-44":127,"45-49":166,"50-54":137,"55-59":85,"60-64":73,"65-69":71,"70-74":71,"75-79":73,"80-84":54,"85-89":14,"90-94":1,"95+":1},
{"Ime naselja":"Grad Đakovo Piškorevci","Spol":"m","Ukupno":975,"0-4":59,"5-9":64,"10-14":75,"15-19":89,"20-24":86,"25-29":76,"30-34":40,"35-39":56,"40-44":66,"45-49":83,"50-54":79,"55-59":57,"60-64":33,"65-69":33,"70-74":33,"75-79":25,"80-84":16,"85-89":5,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Piškorevci","Spol":"ž","Ukupno":932,"0-4":53,"5-9":60,"10-14":68,"15-19":76,"20-24":72,"25-29":52,"30-34":51,"35-39":57,"40-44":61,"45-49":83,"50-54":58,"55-59":28,"60-64":40,"65-69":38,"70-74":38,"75-79":48,"80-84":38,"85-89":9,"90-94":1,"95+":1},
{"Ime naselja":"Grad Đakovo Selci Đakovački","Spol":"UKUPNO","Ukupno":1796,"0-4":129,"5-9":124,"10-14":155,"15-19":126,"20-24":134,"25-29":123,"30-34":104,"35-39":132,"40-44":134,"45-49":117,"50-54":109,"55-59":95,"60-64":103,"65-69":51,"70-74":67,"75-79":48,"80-84":30,"85-89":12,"90-94":3,"95+":0},
{"Ime naselja":"Grad Đakovo Selci Đakovački","Spol":"m","Ukupno":897,"0-4":62,"5-9":68,"10-14":89,"15-19":47,"20-24":63,"25-29":66,"30-34":56,"35-39":78,"40-44":66,"45-49":65,"50-54":62,"55-59":44,"60-64":50,"65-69":23,"70-74":27,"75-79":18,"80-84":8,"85-89":3,"90-94":2,"95+":0},
{"Ime naselja":"Grad Đakovo Selci Đakovački","Spol":"ž","Ukupno":899,"0-4":67,"5-9":56,"10-14":66,"15-19":79,"20-24":71,"25-29":57,"30-34":48,"35-39":54,"40-44":68,"45-49":52,"50-54":47,"55-59":51,"60-64":53,"65-69":28,"70-74":40,"75-79":30,"80-84":22,"85-89":9,"90-94":1,"95+":0},
{"Ime naselja":"Grad Đakovo Široko Polje","Spol":"UKUPNO","Ukupno":1012,"0-4":52,"5-9":76,"10-14":84,"15-19":99,"20-24":77,"25-29":60,"30-34":50,"35-39":52,"40-44":70,"45-49":102,"50-54":65,"55-59":45,"60-64":52,"65-69":34,"70-74":41,"75-79":28,"80-84":17,"85-89":8,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Široko Polje","Spol":"m","Ukupno":507,"0-4":20,"5-9":43,"10-14":34,"15-19":57,"20-24":45,"25-29":36,"30-34":24,"35-39":23,"40-44":41,"45-49":53,"50-54":32,"55-59":29,"60-64":24,"65-69":11,"70-74":16,"75-79":10,"80-84":7,"85-89":2,"90-94":0,"95+":0},
{"Ime naselja":"Grad Đakovo Široko Polje","Spol":"ž","Ukupno":505,"0-4":32,"5-9":33,"10-14":50,"15-19":42,"20-24":32,"25-29":24,"30-34":26,"35-39":29,"40-44":29,"45-49":49,"50-54":33,"55-59":16,"60-64":28,"65-69":23,"70-74":25,"75-79":18,"80-84":10,"85-89":6,"90-94":0,"95+":0}];
        var gradDakovo = jsonData[0];
        let slice = Object.entries(gradDakovo);
        var data = slice.slice(slice.length-20);
        var dataJson = Object.fromEntries(data);
        var keys = Object.keys(dataJson);
        var data = Object.values(dataJson);
        console.log(keys);

        var margin = {top: 20, bottom: 70, left:80, right: 20};
        var width = 1000 - margin.left - margin.right;
        var height = 500 - margin.top - margin.bottom;
        var barPadding = 4;
        var barWidth = width / data.length - barPadding;

        var x = d3.scale.ordinal()
            .domain(keys)
            .rangeRoundBands([0, width]);

        var y = d3.scale.linear()
            .domain([0, d3.max(data)])
            .range([height, 0])
        
        var svg = d3.select("body")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.bottom + margin.top)
            .style("background-color", "lightblue")
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top +")");

        var xAxis = d3.svg.axis()
            .scale(x)
            .orient("bottom")
            .tickFormat(function(d, i) { return keys[i]; });

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .ticks(10);

        svg.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis)
            .selectAll("text")
            .style("text-anchor", "middle");

        svg.append("text")
            .attr("x", (width / 2))
            .attr("y", (height + (margin.bottom / 2)))
            .attr("dy", "1em")
            .style("text-anchor", "middle")
            .text("Dobna skupina");

        svg.append("g")
            .attr("class", "y axis")
            .call(yAxis)
            .append("text")
            .attr("transform", "rotate(-90)")
            .attr("x",0 - (height / 2))
            .attr("y", 0 - margin.left)
            .attr("dy", "1em")
            .style("text-anchor", "middle")
            .text("Broj stanovnika");

        var barchart = svg.selectAll("rect")
            .data(data)
            .enter()
            .append("rect")
            .attr("x", function(d, i) { return x(keys[i]); })
            .attr("y", function(d) { return y(d); })
            .attr("height", function(d) { return height - y(d); })
            .attr("width", barWidth)
            .attr("fill", "blue");
    </script>
</body>
</html>